name: main
on:
    - pull_request
    - push
jobs:
    main:
        name: ${{matrix.node}}
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3
            - uses: actions/setup-node@v3
              with:
                  node-version: ${{matrix.node}}
            - run: |
                  npm install
                  npm run build
                  npm test
            - name: Upload coverage to Codecov
              uses: codecov/codecov-action@v3
              with:
                  token: ${{ secrets.CODECOV_TOKEN }}
                  fail_ci_if_error: true
                  verbose: true
        strategy:
            matrix:
                node:
                    - lts/hydrogen
                    - node
